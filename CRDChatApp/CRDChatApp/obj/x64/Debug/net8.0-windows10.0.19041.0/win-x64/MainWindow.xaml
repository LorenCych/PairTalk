<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="CRDChatApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CRDChatApp"
    xmlns:ui="using:Microsoft.UI.Xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="PairTalk">

    <Window.SystemBackdrop>
        <DesktopAcrylicBackdrop />
    </Window.SystemBackdrop>

    <Grid MaxWidth="750">
        <!-- Define Rows and Columns -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Custom Title Bar -->
        <Grid x:ConnectionId='2' x:Name="AppTitleBar" Height="48" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:ConnectionId='10' x:Name="LeftPaddingColumn" Width="0"/>
                <ColumnDefinition x:ConnectionId='11' x:Name="IconColumn" Width="Auto"/>
                <ColumnDefinition x:ConnectionId='12' x:Name="TitleColumn" Width="Auto"/>
                <ColumnDefinition x:ConnectionId='13' x:Name="LeftDragColumn" Width="*"/>
                <ColumnDefinition x:ConnectionId='14' x:Name="RightDragColumn" Width="*" MinWidth="48"/>
                <ColumnDefinition x:ConnectionId='15' x:Name="AccountColumn" Width="Auto"/>
                <ColumnDefinition x:ConnectionId='16' x:Name="RightPaddingColumn" Width="0"/>
                <ColumnDefinition x:ConnectionId='17' x:Name="ToggleButtonColumn" Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Image x:ConnectionId='18' x:Name="TitleBarIcon" 
                   Source="ms-appx:///Assets/StoreLogo.png"
                   Grid.Column="1"
                   Width="16" Height="16"
                   Margin="8,0,4,0"/>
            <TextBlock x:ConnectionId='19' x:Name="TitleBarTextBlock"
                       Style="{StaticResource CaptionTextBlockStyle}"
                       Grid.Column="2"
                       VerticalAlignment="Center"/>
            
            <ToggleButton x:ConnectionId='20' x:Name="PinToggleButton" 
                          Grid.Column="8"
                          Style="{StaticResource WindowChromeStyle}"
                                                            
                                                                
                          Margin="0,0,10,0"
                          VerticalAlignment="Center"
                          Width="36"
                          Height="36">
                <ToggleButton.Content>
                    <FontIcon x:ConnectionId='21'
                       x:Name="PinIcon"
                       Glyph="&#xE718;"
                       FontSize="12"
                       ToolTipService.ToolTip="Pin this window"/>
                </ToggleButton.Content>
            </ToggleButton>
            
        </Grid>

        <!-- Top Panel for Avatars and Pin/Unpin Toggle -->
        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Left Spacer -->
            <StackPanel Grid.Column="0" HorizontalAlignment="Left" />

            <!-- Avatars -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                <PersonPicture x:ConnectionId='8'
            x:Name="RemoteUserProfile"
            DisplayName="Lee Juyeon"
            Style="{StaticResource InactiveRemoteUserProfileStyle}" />

                <PersonPicture x:ConnectionId='9'
            x:Name="LocalUserProfile"
            DisplayName="Kim Younghoon"
            Style="{StaticResource ActiveLocalUserProfileStyle}" />
            </StackPanel>
        </Grid>

        <!-- Chat Area -->
        <ScrollViewer x:ConnectionId='3' x:Name="ChatScrollViewer" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Margin="10">
            <StackPanel x:ConnectionId='7' x:Name="MessagePanel"/>
        </ScrollViewer>

        <!-- Message Input Area -->
        <Grid Grid.Row="3" Grid.Column="0" VerticalAlignment="Bottom" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox x:ConnectionId='4' x:Name="MessageTextBox"
                     Grid.Column="0"
                     PlaceholderText="Type a message..."
                     Margin="0,0,5,0"
                     MinWidth="200"
                     MaxHeight="32"
                                                     
            />

            
            <Button x:ConnectionId='5' x:Name="SendButton" Grid.Column="1"                    
                    Style="{StaticResource DefaultButtonStyle}"
                    Margin="0,0,6,0"> <!-- Padding: Left, Top, Right, Bottom --> 
                <Button.Content>
                    <FontIcon Glyph="&#xE724;" />
                </Button.Content>
            </Button>

            <ToggleButton x:ConnectionId='6' x:Name="UserSwitchButton" Grid.Column="2"                               
          Style="{StaticResource DefaultToggleButtonStyle}">
                <ToggleButton.Content>
                    <FontIcon Glyph="&#xE748;" Foreground="White"
                              ToolTipService.ToolTip="Ctrl + Enter to switch user."/>
                </ToggleButton.Content>
            </ToggleButton>
        </Grid>
    </Grid>
</Window>

